import{Q as pe,e as K,n as me,f as oe,r as ge,g as ye,c as H,o as q,j as X,b as n,h as le,k as ve,d as B,F as se,t as be,u as y,a as ue,s as de}from"./app-BX-u6XFr.js";import{a as _e,c as re}from"./cloneDeep-Cr1AA7UL.js";import{c as $e,t as ke,g as A}from"./get-DjLjuSKy.js";import{i as ce,o as Me}from"./_Uint8Array-BxbSsmXd.js";import{a as Se,u as De,b as xe}from"./notifier-DiKGDvod.js";var ee={exports:{}},we=ee.exports,fe;function Oe(){return fe||(fe=1,function(C,v){(function(d,m){C.exports=m()})(we,function(){var d=1e3,m=6e4,w=36e5,O="millisecond",c="second",b="minute",k="hour",x="day",L="week",I="month",i="quarter",e="year",h="date",P="Invalid Date",Y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var r=["th","st","nd","rd"],t=o%100;return"["+o+(r[(t-20)%10]||r[t]||r[0])+"]"}},te=function(o,r,t){var a=String(o);return!a||a.length>=r?o:""+Array(r+1-a.length).join(t)+o},he={s:te,z:function(o){var r=-o.utcOffset(),t=Math.abs(r),a=Math.floor(t/60),s=t%60;return(r<=0?"+":"-")+te(a,2,"0")+":"+te(s,2,"0")},m:function o(r,t){if(r.date()<t.date())return-o(t,r);var a=12*(t.year()-r.year())+(t.month()-r.month()),s=r.clone().add(a,I),l=t-s<0,u=r.clone().add(a+(l?-1:1),I);return+(-(a+(t-s)/(l?s-u:u-s))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:I,y:e,w:L,d:x,D:h,h:k,m:b,s:c,ms:O,Q:i}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},z="en",N={};N[z]=S;var ie="$isDayjsObject",ne=function(o){return o instanceof Q||!(!o||!o[ie])},Z=function o(r,t,a){var s;if(!r)return z;if(typeof r=="string"){var l=r.toLowerCase();N[l]&&(s=l),t&&(N[l]=t,s=l);var u=r.split("-");if(!s&&u.length>1)return o(u[0])}else{var p=r.name;N[p]=r,s=p}return!a&&s&&(z=s),s||!a&&z},_=function(o,r){if(ne(o))return o.clone();var t=typeof r=="object"?r:{};return t.date=o,t.args=arguments,new Q(t)},f=he;f.l=Z,f.i=ne,f.w=function(o,r){return _(o,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var Q=function(){function o(t){this.$L=Z(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[ie]=!0}var r=o.prototype;return r.parse=function(t){this.$d=function(a){var s=a.date,l=a.utc;if(s===null)return new Date(NaN);if(f.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var u=s.match(Y);if(u){var p=u[2]-1||0,g=(u[7]||"0").substring(0,3);return l?new Date(Date.UTC(u[1],p,u[3]||1,u[4]||0,u[5]||0,u[6]||0,g)):new Date(u[1],p,u[3]||1,u[4]||0,u[5]||0,u[6]||0,g)}}return new Date(s)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return f},r.isValid=function(){return this.$d.toString()!==P},r.isSame=function(t,a){var s=_(t);return this.startOf(a)<=s&&s<=this.endOf(a)},r.isAfter=function(t,a){return _(t)<this.startOf(a)},r.isBefore=function(t,a){return this.endOf(a)<_(t)},r.$g=function(t,a,s){return f.u(t)?this[a]:this.set(s,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,a){var s=this,l=!!f.u(a)||a,u=f.p(t),p=function(E,T){var F=f.w(s.$u?Date.UTC(s.$y,T,E):new Date(s.$y,T,E),s);return l?F:F.endOf(x)},g=function(E,T){return f.w(s.toDate()[E].apply(s.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(T)),s)},$=this.$W,D=this.$M,j=this.$D,G="set"+(this.$u?"UTC":"");switch(u){case e:return l?p(1,0):p(31,11);case I:return l?p(1,D):p(0,D+1);case L:var W=this.$locale().weekStart||0,U=($<W?$+7:$)-W;return p(l?j-U:j+(6-U),D);case x:case h:return g(G+"Hours",0);case k:return g(G+"Minutes",1);case b:return g(G+"Seconds",2);case c:return g(G+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,a){var s,l=f.p(t),u="set"+(this.$u?"UTC":""),p=(s={},s[x]=u+"Date",s[h]=u+"Date",s[I]=u+"Month",s[e]=u+"FullYear",s[k]=u+"Hours",s[b]=u+"Minutes",s[c]=u+"Seconds",s[O]=u+"Milliseconds",s)[l],g=l===x?this.$D+(a-this.$W):a;if(l===I||l===e){var $=this.clone().set(h,1);$.$d[p](g),$.init(),this.$d=$.set(h,Math.min(this.$D,$.daysInMonth())).$d}else p&&this.$d[p](g);return this.init(),this},r.set=function(t,a){return this.clone().$set(t,a)},r.get=function(t){return this[f.p(t)]()},r.add=function(t,a){var s,l=this;t=Number(t);var u=f.p(a),p=function(D){var j=_(l);return f.w(j.date(j.date()+Math.round(D*t)),l)};if(u===I)return this.set(I,this.$M+t);if(u===e)return this.set(e,this.$y+t);if(u===x)return p(1);if(u===L)return p(7);var g=(s={},s[b]=m,s[k]=w,s[c]=d,s)[u]||1,$=this.$d.getTime()+t*g;return f.w($,this)},r.subtract=function(t,a){return this.add(-1*t,a)},r.format=function(t){var a=this,s=this.$locale();if(!this.isValid())return s.invalidDate||P;var l=t||"YYYY-MM-DDTHH:mm:ssZ",u=f.z(this),p=this.$H,g=this.$m,$=this.$M,D=s.weekdays,j=s.months,G=s.meridiem,W=function(T,F,V,R){return T&&(T[F]||T(a,l))||V[F].slice(0,R)},U=function(T){return f.s(p%12||12,T,"0")},E=G||function(T,F,V){var R=T<12?"AM":"PM";return V?R.toLowerCase():R};return l.replace(M,function(T,F){return F||function(V){switch(V){case"YY":return String(a.$y).slice(-2);case"YYYY":return f.s(a.$y,4,"0");case"M":return $+1;case"MM":return f.s($+1,2,"0");case"MMM":return W(s.monthsShort,$,j,3);case"MMMM":return W(j,$);case"D":return a.$D;case"DD":return f.s(a.$D,2,"0");case"d":return String(a.$W);case"dd":return W(s.weekdaysMin,a.$W,D,2);case"ddd":return W(s.weekdaysShort,a.$W,D,3);case"dddd":return D[a.$W];case"H":return String(p);case"HH":return f.s(p,2,"0");case"h":return U(1);case"hh":return U(2);case"a":return E(p,g,!0);case"A":return E(p,g,!1);case"m":return String(g);case"mm":return f.s(g,2,"0");case"s":return String(a.$s);case"ss":return f.s(a.$s,2,"0");case"SSS":return f.s(a.$ms,3,"0");case"Z":return u}return null}(T)||u.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,a,s){var l,u=this,p=f.p(a),g=_(t),$=(g.utcOffset()-this.utcOffset())*m,D=this-g,j=function(){return f.m(u,g)};switch(p){case e:l=j()/12;break;case I:l=j();break;case i:l=j()/3;break;case L:l=(D-$)/6048e5;break;case x:l=(D-$)/864e5;break;case k:l=D/w;break;case b:l=D/m;break;case c:l=D/d;break;default:l=D}return s?l:f.a(l)},r.daysInMonth=function(){return this.endOf(I).$D},r.$locale=function(){return N[this.$L]},r.locale=function(t,a){if(!t)return this.$L;var s=this.clone(),l=Z(t,a,!0);return l&&(s.$L=l),s},r.clone=function(){return f.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},o}(),ae=Q.prototype;return _.prototype=ae,[["$ms",O],["$s",c],["$m",b],["$H",k],["$W",x],["$M",I],["$y",e],["$D",h]].forEach(function(o){ae[o[1]]=function(r){return this.$g(r,o[0],o[1])}}),_.extend=function(o,r){return o.$i||(o(r,Q,_),o.$i=!0),_},_.locale=Z,_.isDayjs=ne,_.unix=function(o){return _(1e3*o)},_.en=N[z],_.Ls=N,_.p={},_})}(ee)),ee.exports}var Te=Oe();const Ce=pe(Te);function Ie(C,v,d,m){if(!ce(C))return C;v=$e(v,C);for(var w=-1,O=v.length,c=O-1,b=C;b!=null&&++w<O;){var k=ke(v[w]),x=d;if(k==="__proto__"||k==="constructor"||k==="prototype")return C;if(w!=c){var L=b[k];x=void 0,x===void 0&&(x=ce(L)?L:Me(v[w+1])?[]:{})}_e(b,k,x),b=b[k]}return C}function J(C,v,d){return C==null?C:Ie(C,v,d)}const Ye={key:0,class:"mb:24"},je={class:"form-table",role:"presentation"},Le={key:0,class:"flex my:10 align-items:center font:medium"},Ae={key:1,class:"description"},Fe={class:"mb:24"},He={class:"form-table",role:"presentation"},qe={class:"flex gap-x:4"},Be=["href"],Pe={class:"flex align-items:center my:8"},Ne=["checked","value"],We={class:"mb:24"},Ee={class:"form-table",role:"presentation"},Ge=["checked","value"],ze=["checked","value"],Ue=["checked","value"],Ve={class:"mb:24"},Je={class:"form-table",role:"presentation"},Ze={class:"flex align-items:center"},Qe=["value"],nt={__name:"Index",setup(C){const v=Se(),d=De(),m=xe(),w=K({key:null,is_activated:!1,opt_in_pre_release:!1}),O=K({last_generated:"",pending_task:!1,file_url:""}),c=K({}),b=K(null);me(()=>{d.add("settings:fetch-license"),v.request({method:"GET",url:"/setting/license/index"}).then(i=>i.data).then(i=>{w.value=i.license}).catch(function(i){m.alert(i.message)}).finally(()=>{d.remove("settings:fetch-license")}),d.add("settings:fetch-cache"),v.request({method:"GET",url:"/setting/cache/index"}).then(i=>i.data).then(i=>{O.value=i.cache}).catch(function(i){m.alert(i.message)}).finally(()=>{d.remove("settings:fetch-cache")}),d.add("settings:fetch-options"),v.request({method:"GET",url:"/setting/option/index"}).then(i=>i.data).then(i=>{c.value=re(i.options)}).then(()=>{var i;b.value=(i=c.value.adobe_fonts)==null?void 0:i.kit}).catch(function(i){m.alert(i.message)}).finally(()=>{d.remove("settings:fetch-options")})}),oe(()=>w.value.key,async(i,e)=>{d.isBusy||i!==e&&(d.add("settings:store-license"),v.request({method:"POST",url:"/setting/license/store",data:{license:i}}).then(h=>h.data).then(h=>{var P,Y,M,S;w.value=re(h.license),Object.keys(h.notice).length>0?(P=h.notice)!=null&&P.success?m.success((Y=h.notice)==null?void 0:Y.success):(M=h.notice)!=null&&M.error&&m.alert((S=h.notice)==null?void 0:S.error):m.success("License setting saved.")}).catch(function(h){m.alert(h.message)}).finally(()=>{d.remove("settings:store-license")}))}),oe(()=>{var i;return(i=c.value.adobe_fonts)==null?void 0:i.project_id},async(i,e)=>{if(!d.isBusy&&i!==e){if(b.value=null,i===null){I();return}d.add("settings:fetch-adobe-fonts-kits"),v.request({method:"POST",url:"/setting/adobe-fonts/get-kits",data:{project_id:i}}).then(h=>h.data).then(h=>{b.value=h.data.kit,k(),L()}).catch(function(h){m.alert(h.response.data.message)}).finally(()=>{d.remove("settings:fetch-adobe-fonts-kits")})}});function k(){d.add("settings:store-options"),v.request({method:"POST",url:"/setting/option/store",data:{options:c.value}}).then(i=>i.data).then(i=>{c.value=re(i.options),m.success("Settings saved.")}).catch(function(i){m.alert(i.message)}).finally(()=>{d.remove("settings:store-options")})}function x(){d.add("settings:generate-cache"),v.request({method:"POST",url:"/setting/cache/generate"}).then(i=>i.data).then(i=>{O.value=i.cache}).catch(function(i){m.alert(i.message)}).finally(()=>{d.remove("settings:generate-cache")})}function L(){d.add("settings:sync-adobe-fonts"),v.request({method:"POST",url:"/setting/adobe-fonts/sync",data:{project_id:c.value.adobe_fonts.project_id,kit:b.value}}).then(i=>i.data).then(i=>{m.success("Adobe Fonts synced.")}).catch(function(i){m.alert(i.message)}).finally(()=>{d.remove("settings:sync-adobe-fonts")})}function I(){d.add("settings:destroy-adobe-fonts"),v.request({method:"POST",url:"/setting/adobe-fonts/destroy"}).then(i=>i.data).then(i=>{m.success("Adobe Fonts cleared.")}).catch(function(i){m.alert(i.message)}).finally(()=>{d.remove("settings:destroy-adobe-fonts")})}return(i,e)=>{const h=ge("Icon"),P=ye("ripple");return q(),H(se,null,[i.yabeWebfont.lite_edition?X("",!0):(q(),H("div",Ye,[n("table",je,[n("tbody",null,[n("tr",null,[e[8]||(e[8]=n("th",{scope:"row"},[n("label",null,"License Key")],-1)),n("td",null,[le(n("input",{name:"license_key",type:"password","onUpdate:modelValue":e[0]||(e[0]=Y=>w.value.key=Y),class:"min-w:25rem"},null,512),[[ve,w.value.key,void 0,{lazy:!0}]]),w.value.is_activated?(q(),H("div",Le,e[6]||(e[6]=[B(" Status: "),n("span",{class:"bg:green-80 fg:white font:regular ml:10 px:6 py:4 r:4 user-select:none"}," active ",-1)]))):(q(),H("p",Ae,e[7]||(e[7]=[B("Enter your "),n("a",{href:"https://webfont.yabe.land/#pricing-plans",target:"_blank"},"license key",-1),B(" receive the update of the latest version.")])))])])])])])),n("div",Fe,[e[16]||(e[16]=n("h2",{class:"title"},"Performance",-1)),n("table",He,[n("tbody",null,[n("tr",null,[e[12]||(e[12]=n("th",{scope:"row"}," Cached CSS ",-1)),n("td",null,[n("p",qe,[e[9]||(e[9]=n("span",{class:"font:medium"}," Last generated: ",-1)),O.value.last_generated?(q(),H(se,{key:0},[B(be(new(y(Ce))(O.value.last_generated*1e3).format("YYYY-MM-DD HH:mm:ss"))+" ",1),n("a",{href:`${O.value.file_url}?ver=${O.value.last_generated}`,target:"_blank"},[ue(h,{icon:"fa6-solid:arrow-up-right-from-square",class:"font:13 translateY(-6)"})],8,Be)],64)):X("",!0),n("span",{class:de([y(d).isBusy&&(y(d).hasTask("settings:generate-cache")||y(d).hasTask("settings:fetch-cache"))?"visible":"hidden","spinner"])},null,2)]),e[11]||(e[11]=n("p",{class:"description"}," Serve the CSS file from the cache instead of generating it on the fly. ",-1)),n("div",Pe,[n("button",{type:"button",onClick:x,class:"button button-secondary"}," Re-generate cache "),O.value.pending_task?(q(),H(se,{key:0},[ue(h,{icon:"fa6-solid:hourglass-half",class:"ml:12 fg:gray-50"}),e[10]||(e[10]=n("span",{class:"fg:gray-50 pl:4"}," There is a scheduled task to generate the cache. ",-1))],64)):X("",!0)])])]),n("tr",null,[e[15]||(e[15]=n("th",{scope:"row"},[n("label",null,"Cache loading method")],-1)),n("td",null,[n("input",{id:"inline-print",name:"inline_print",type:"checkbox",checked:y(A)(c.value,"cache.inline_print",!1),value:y(A)(c.value,"cache.inline_print",!1),onInput:e[1]||(e[1]=Y=>{var M,S;return y(J)(c.value,"cache.inline_print",!((S=(M=c.value)==null?void 0:M.cache)!=null&&S.inline_print))})},null,40,Ne),e[13]||(e[13]=n("label",{for:"inline-print"}," Inline style",-1)),e[14]||(e[14]=n("p",{class:"description"},"Load font style via inline styles instead of external file.",-1))])])])])]),n("div",We,[e[26]||(e[26]=n("h2",{class:"title"},"Misc.",-1)),n("table",Ee,[n("tbody",null,[n("tr",null,[e[19]||(e[19]=n("th",{scope:"row"},[n("label",null,"Media Library")],-1)),n("td",null,[n("input",{id:"media-library",name:"hide_media_library",type:"checkbox",checked:y(A)(c.value,"misc.hide_media_library",!1),value:y(A)(c.value,"misc.hide_media_library",!1),onInput:e[2]||(e[2]=Y=>{var M,S;return y(J)(c.value,"misc.hide_media_library",!((S=(M=c.value)==null?void 0:M.misc)!=null&&S.hide_media_library))})},null,40,Ge),e[17]||(e[17]=n("label",{for:"media-library"}," Hide font files from Media Library ",-1)),e[18]||(e[18]=n("p",{class:"description"}," Only show items in the Media Library that satisfy the following conditions: original allowed mime types. ",-1))])]),n("tr",null,[e[22]||(e[22]=n("th",{scope:"row"},[n("label",null,"Bundled export")],-1)),n("td",null,[n("input",{id:"export-bundle-binary",name:"export_bundle_binary",type:"checkbox",checked:y(A)(c.value,"misc.export_bundle_binary",!1),value:y(A)(c.value,"misc.export_bundle_binary",!1),onInput:e[3]||(e[3]=Y=>{var M,S;return y(J)(c.value,"misc.export_bundle_binary",!((S=(M=c.value)==null?void 0:M.misc)!=null&&S.export_bundle_binary))})},null,40,ze),e[20]||(e[20]=n("label",{for:"export-bundle-binary"}," Bundle file on the exported file ",-1)),e[21]||(e[21]=n("p",{class:"description"}," Include font binary file on the exported file. This will increase the file size. ",-1))])]),n("tr",null,[e[25]||(e[25]=n("th",{scope:"row"},[n("label",null,"Disable user's Google Fonts")],-1)),n("td",null,[n("input",{id:"disable-user-google-fonts",name:"disable_user_google_fonts",type:"checkbox",checked:y(A)(c.value,"misc.disable_user_google_fonts",!1),value:y(A)(c.value,"misc.disable_user_google_fonts",!1),onInput:e[4]||(e[4]=Y=>{var M,S;return y(J)(c.value,"misc.disable_user_google_fonts",!((S=(M=c.value)==null?void 0:M.misc)!=null&&S.disable_user_google_fonts))})},null,40,Ue),e[23]||(e[23]=n("label",{for:"disable-user-google-fonts"}," Disable Google Fonts API that loaded manually ",-1)),e[24]||(e[24]=n("p",{class:"description"},[B(" Scan and disable Google Fonts API that loaded manually by the theme or plugin through "),n("code",null,"wp_enqueue_style"),B(" function. ")],-1))])])])])]),n("div",Ve,[e[29]||(e[29]=n("h2",{class:"title"},"Adobe Fonts",-1)),n("table",Je,[n("tbody",null,[n("tr",null,[e[28]||(e[28]=n("th",{scope:"row"},[n("label",null,"Project ID")],-1)),n("td",null,[n("div",Ze,[n("input",{type:"text",id:"adobe-font-project-id",name:"adobe_font_project_id",value:y(A)(c.value,"adobe_fonts.project_id",null),onChange:e[5]||(e[5]=Y=>y(J)(c.value,"adobe_fonts.project_id",Y.target.value===""?null:Y.target.value)),class:""},null,40,Qe),b.value?(q(),H("button",{key:0,type:"button",onClick:L,class:"button button-secondary"}," Sync fonts ")):X("",!0),n("span",{class:de([y(d).isBusy&&(y(d).hasTask("settings:fetch-adobe-fonts-kits")||y(d).hasTask("settings:sync-adobe-fonts-kits"))?"visible":"hidden","spinner"])},null,2)]),e[27]||(e[27]=n("p",{class:"description"},[B(" Get your Project ID from "),n("a",{href:"https://fonts.adobe.com/my_fonts#web_projects-section",target:"_blank"},"https://fonts.adobe.com/my_fonts#web_projects-section")],-1))])])])])]),le((q(),H("button",{type:"button",onClick:k,class:"button button-primary"},e[30]||(e[30]=[B("Save Changes")]))),[[P]])],64)}}};export{nt as default};
